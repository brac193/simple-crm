<% content_for :title, "Add New Car" %>

<div class="row">
  <div class="col-md-8">
    <div class="card">
      <h1 class="card-title mb-6">Add New Car</h1>
      
      <%= form_with model: @car_form, url: cars_path, local: true, class: "space-y-4" do |form| %>
        <% if @car_form.errors.any? %>
          <div class="alert alert-danger">
            <h4><%= pluralize(@car_form.errors.count, "error") %> prohibited this car from being saved:</h4>
            <ul>
              <% @car_form.errors.full_messages.each do |message| %>
                <li><%= message %></li>
              <% end %>
            </ul>
          </div>
        <% end %>
        
        <div class="row">
          <div class="col-md-6">
            <div class="form-group">
              <%= form.label :make, "Make", class: "form-label" %>
              <%= form.text_field :make, 
                  class: "form-control #{'is-invalid' if @car_form.errors[:make].any?}",
                  placeholder: "e.g., Toyota, Honda, Ford",
                  required: true %>
              <% if @car_form.errors[:make].any? %>
                <div class="invalid-feedback">
                  <%= @car_form.errors[:make].join(', ') %>
                </div>
              <% end %>
            </div>
          </div>
          
          <div class="col-md-6">
            <div class="form-group">
              <%= form.label :model, "Model", class: "form-label" %>
              <%= form.text_field :model, 
                  class: "form-control #{'is-invalid' if @car_form.errors[:model].any?}",
                  placeholder: "e.g., Camry, Civic, Focus",
                  required: true %>
              <% if @car_form.errors[:model].any? %>
                <div class="invalid-feedback">
                  <%= @car_form.errors[:model].join(', ') %>
                </div>
              <% end %>
            </div>
          </div>
        </div>
        
        <div class="row">
          <div class="col-md-6">
            <div class="form-group">
              <%= form.label :year, "Year", class: "form-label" %>
              <%= form.select :year, 
                  options_for_select(@car_form.year_range, @car_form.year),
                  { prompt: "Select year" },
                  { class: "form-control #{'is-invalid' if @car_form.errors[:year].any?}", required: true } %>
              <% if @car_form.errors[:year].any? %>
                <div class="invalid-feedback">
                  <%= @car_form.errors[:year].join(', ') %>
                </div>
              <% end %>
            </div>
          </div>
          
          <div class="col-md-6">
            <div class="form-group">
              <%= form.label :car_type, "Car Type", class: "form-label" %>
              <%= form.select :car_type, 
                  options_for_select(@car_form.car_types, @car_form.car_type),
                  { prompt: "Select car type" },
                  { class: "form-control #{'is-invalid' if @car_form.errors[:car_type].any?}", required: true } %>
              <% if @car_form.errors[:car_type].any? %>
                <div class="invalid-feedback">
                  <%= @car_form.errors[:car_type].join(', ') %>
                </div>
              <% end %>
            </div>
          </div>
        </div>
        
        <div class="row">
          <div class="col-md-6">
            <div class="form-group">
              <%= form.label :license_plate, "License Plate", class: "form-label" %>
              <%= form.text_field :license_plate, 
                  class: "form-control #{'is-invalid' if @car_form.errors[:license_plate].any?}",
                  placeholder: "e.g., ABC-123, XYZ 456",
                  required: true %>
              <% if @car_form.errors[:license_plate].any? %>
                <div class="invalid-feedback">
                  <%= @car_form.errors[:license_plate].join(', ') %>
                </div>
              <% end %>
              <small style="color: #6b7280; font-size: 0.875rem;">
                Letters, numbers, spaces, and hyphens only
              </small>
            </div>
          </div>
          
          <div class="col-md-6">
            <div class="form-group">
              <%= form.label :daily_rate, "Daily Rate ($)", class: "form-label" %>
              <div style="position: relative;">
                <span style="position: absolute; left: 0.75rem; top: 50%; transform: translateY(-50%); color: #6b7280;">$</span>
                <%= form.number_field :daily_rate, 
                    class: "form-control #{'is-invalid' if @car_form.errors[:daily_rate].any?}",
                    placeholder: "0.00",
                    step: "0.01",
                    min: "0",
                    style: "padding-left: 1.5rem;",
                    required: true %>
              </div>
              <% if @car_form.errors[:daily_rate].any? %>
                <div class="invalid-feedback">
                  <%= @car_form.errors[:daily_rate].join(', ') %>
                </div>
              <% end %>
            </div>
          </div>
        </div>
        
        <div class="flex gap-2">
          <%= form.submit "Create Car", class: "btn btn-primary flex-1" %>
          <%= link_to "Cancel", cars_path, class: "btn btn-secondary flex-1 text-center" %>
        </div>
      <% end %>
    </div>
  </div>
  
  <div class="col-md-4">
    <div class="card">
      <h2 class="card-title mb-4">Car Guidelines</h2>
      <div class="space-y-3">
        <div style="display: flex; align-items: flex-start;">
          <i class="fas fa-car" style="color: #27ae60; margin-right: 0.5rem; margin-top: 0.25rem;"></i>
          <div>
            <strong>Small Cars:</strong> $20-$100/day<br>
            <small style="color: #6b7280;">Compact vehicles, fuel efficient</small>
          </div>
        </div>
        <div style="display: flex; align-items: flex-start;">
          <i class="fas fa-car-side" style="color: #3498db; margin-right: 0.5rem; margin-top: 0.25rem;"></i>
          <div>
            <strong>City Cars:</strong> $30-$150/day<br>
            <small style="color: #6b7280;">Mid-size sedans, comfortable</small>
          </div>
        </div>
        <div style="display: flex; align-items: flex-start;">
          <i class="fas fa-truck" style="color: #9b59b6; margin-right: 0.5rem; margin-top: 0.25rem;"></i>
          <div>
            <strong>SUVs:</strong> $50-$300/day<br>
            <small style="color: #6b7280;">Large vehicles, spacious</small>
          </div>
        </div>
      </div>
      
      <div class="border-t pt-4 mt-4">
        <h3 style="font-size: 1rem; font-weight: 600; margin-bottom: 0.5rem;">Validation Rules</h3>
        <ul style="font-size: 0.875rem; color: #6b7280; padding-left: 1rem;">
          <li>Make: 2-50 characters</li>
          <li>Model: 1-50 characters</li>
          <li>Year: 1901 to next year</li>
          <li>License plate: 3-20 characters</li>
          <li>Daily rate: $1-$9,999</li>
          <li>License plates must be unique</li>
        </ul>
      </div>
    </div>
  </div>
</div>

<style>
.is-invalid {
  border-color: #dc3545;
}

.invalid-feedback {
  display: block;
  width: 100%;
  margin-top: 0.25rem;
  font-size: 0.875rem;
  color: #dc3545;
}
</style>
